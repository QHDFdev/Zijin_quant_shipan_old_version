<div class="zijin-table">
    <div class="zijin-table-head">
        <div class="container">
            <h1>紫金量化 加载策略</h1>
            <p>无论你使用了MachineLearning，DeepLearning，多因子模型，经典海龟模型，量化择时，情绪指数，统计套利等等各种方法，写出了年化收益最高，最大回撤奇低的各种模型。</p>
            <p>无论你策略在历史数据上回撤多么优秀，一切见真章，你必须要做实验模拟，来检测你策略真正运行效果。</p>
        </div> 
        <div class="zijin-table-bigmask"></div>
    </div>
    <div class="zijin-table-body container sourcing-strategy;">
        <div class="zijin-table-title">
            <span>策略代码</span>
            <i class="zijin-table-add" ng-click='openMaskSourcing()' data-toggle="tooltip"  data-placement="right" title="增加策略" tooltip></i>
             <!--<button class="btn btn-danger sour-del" style="float:right;margin-top:20px;margin-right: 48px">删除策略 <i class="fa fa-remove"></i></button>-->
        </div>
        <div class="table-responsive">
            <table class="table table-bordered table-hover table-striped" sourcing-table>
                <thead class="bg-success">
                    <tr>
                        <!--<th class="col-xs-2">选择</th>-->
                        <th class="col-xs-2">策略类名</th>
                        <th class="col-xs-1">代码文件名</th>
                        <th class="col-xs-2">作者</th>
                        <th class="col-xs-4">策略操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat='d in mySourcingStrategy | orderBy: "class_name" '>
                        <td class="hidden-id"  style="display: none" ng-bind='d._id'></td>
                        <!--<td><input type="checkbox"></td>-->
                        <td><a href="#/complie/{{d._id}}" ng-bind="d.class_name"></a></td>
                        <td ng-bind="d.code_name"></td>
                        <td ng-bind="d.author"></td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <button class="btn btn-info firm-add">创建实盘模拟策略 <i class="fa fa-plus"></i></button>
                                <button class="btn btn-success his-add">创建历史回测策略 <i class="fa fa-plus"></i></button>
                                <button class="btn btn-danger sour-del">删除策略 <i class="fa fa-remove"></i></button>
                            </div>
                        </td>

                    </tr>
                </tbody>
            </table>
        </div>    
    </div>
     <div class="zijin-table-body container firm-strategy">
        <div class="zijin-table-title">
            <span>实盘模拟</span>
            <!-- <i class="zijin-table-add" ng-click='openMask()' data-toggle="tooltip"  data-placement="right" title="增加策略" tooltip></i> -->
        </div>
        <div class="table-responsive">
            <table class="table table-bordered table-hover table-striped" strategy-table>
                <thead class="bg-success">
                    <tr>
                        <th class="col-xs-1">策略名字</th>
                        <th class="col-xs-1">合约代码</th>
                        <th class="col-xs-2">作者</th>
                        <th class="col-xs-2">状态</th>
                        <th class="col-xs-4">策略操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat='d in myStrategy | orderBy: "name" | filter:func'>
                        <td class="hidden-id" style="display: none;" ng-bind='d._id'></td>
                        <td ng-bind="d.name"></td>
                        <td ng-bind="d.symbol"></td>
                        <td ng-bind="d.author"></td>
                        <td ng-bind="d.status" title="{{d.title}}"></td>
                        <td>
                            <div class="btn-group btn-group-sm">
                               <!--  <button  class="btn btn-info strategy-ini">初始化 <i class="icon-circle-blank"></i></button> -->
                                <button  class="btn btn-success strategy-start">启动 <i class="fa fa-play"></i></button>
                                <button class="btn btn-warning strategy-pause">停止 <i class="fa fa-pause"></i></button>
                                <button  class="btn btn-danger strategy-del">删除策略 <i class="fa fa-remove"></i></button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>    
    </div>
    <div class="zijin-table-body container his-strategy">
        <div class="zijin-table-title">
            <span>历史回测</span>
            <!-- <i class="zijin-table-add" ng-click='openMask()' data-toggle="tooltip"  data-placement="right" title="增加策略" tooltip></i> -->
        </div>
        <div class="table-responsive">
            <table class="table table-bordered table-hover table-striped" his-table >
                <thead class="bg-success">
                    <tr>
                        <th class="col-xs-1">策略名字</th>
                        <th class="col-xs-1">mode</th>
                        <th class="col-xs-2">开始时间</th>
                        <th class="col-xs-2">结束时间</th>
                        <th class="col-xs-2">状态</th>
                        <th class="col-xs-4">策略操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat='d in myHisStrategy | orderBy: "name" | filter:func'>
                        <td class="hidden-id" style="display: none;" ng-bind='d._id'></td>
                        <td ng-bind="d.name"></td>
                        <td ng-bind="d.mode"></td>
                        <td ng-bind="d.start"></td>
                        <td ng-bind="d.end"></td>
                        <td ng-bind="d.status" title="{{d.title}}"></td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <button class="btn btn-warning strategy-pause">停止 <i class="fa fa-pause"></i></button>
                                <button  class="btn btn-danger strategy-del">删除策略 <i class="fa fa-remove"></i></button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>    
    </div>
    <div class="zijin-table-body container rec-strategy">
        <div class="row">
            <div class="col-lg-6 col-md-8 col-sm-12">
                <div class="zijin-table-title" slide-toggle>
                    <span><i class="fa fa-trash"></i>&nbsp;回收站&nbsp;<span class="caret"></span></span>
                </div>
                <div class="table-responsive" style="display: none;">
                    <table class="table table-bordered table-hover table-striped" strategy-table>
                        <thead class="bg-success">
                            <tr>
                                <th class="col-xs-1">策略名字</th>
                                <th class="col-xs-1">策略操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat='d in allStrategys | orderBy: "name" | filter:{status:-3}'>
                                <td class="hidden-id" style="display: none;" ng-bind='d._id'></td>
                                <td ng-bind="d.name"></td>
                                <td>
                                    <div class="btn-group btn-group-sm">
                                        <button  class="btn btn-danger strategy-del">删除策略 <i class="fa fa-remove"></i></button>
                                    </div>
                                </td>
                            </tr>
                            <!--<button  class="btn btn-danger alldel" ng-click="alldel()" style="margin-left: 380px">清空回收站<i class="fa fa-remove"></i></button>-->
                        </tbody>
                    </table>
                </div>
            </div>
    </div>

</div>

<!-- sourcing-mask -->
<div class="zijin-table-mask sourcing-mask">
    <div class="mask-box container">
        <div class="row">
            <div class=" col-sm-8 col-sm-offset-2">
                <form ng-submit="addSourcingStrategy()" name="newSourcingStrategy" novalidate="" enctype="multipart/form-data" id="newSourcingStrategy">
                    <div class="form-group">
                       <span> <a href="Demo_Moban.py" target="_blank">首次编写策略请点击下载模版代码</a>&nbsp;&nbsp;&nbsp;
                           <a href="instructions.txt" download="instructions.txt" target="_blank" title="{{titleQuick}}"   id="downtxt">策略编写QuickStart</a>
                       </span>
                        <input style="margin-top: 20px;" type="text" class="form-control" ng-model='itemSourcing.class_name ' placeholder="输入策略类名（策略类名必须与代码类名一致）" required>
                    </div>
                    <div class="form-group">
                        <label>代码文件：</label><input type="file" name="file"  file-model='sourcingCode' placeholder="代码" required="">
                    </div>
                    <div class="btn-group btn-group-lg">
                        <input class="btn-success btn" type="submit"  value="提交" style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;">
                        <input class="btn-warning btn" style="margin-left: 20px;border-bottom-left-radius: 5px;border-top-left-radius: 5px" ng-click="closeMask()" value="关闭" type="button">
                    </div>
                </form>
            </div>  
        </div>  
    </div>
</div>


<!-- firm mask -->
<div class="zijin-table-mask firm-mask">
    <div class="mask-box container">
        <div class="row">
            <div class=" col-sm-8 col-sm-offset-2">
                <form ng-submit="addFirmStrategy()" name="newFirmStrategy" novalidate="" enctype="multipart/form-data" id="newFirmStrategy">
                    <div class="form-group">
                        <input type="text" class="form-control" ng-model='firmItem.name' placeholder="策略名" required>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" ng-model='firmItem.symbol' placeholder="交易合约" required>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" ng-model='firmItem.exchange' placeholder="策略交易所代码" required>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" ng-model='firmItem.multiple' placeholder="策略交易手数的倍数" required>
                    </div>
                    <div>
                        <select name="" id="" ng-model="account" ng-options="id as id._id for id in ids"></select>
                        <h5>您选择的账号id是：{{account.uid}}</h5>
                        <h5>您选择的交易所代码是：{{account.exchange}}</h5>
                    </div>
                    <div class="form-group">
                        <label>代码依赖文件：</label><input type="file" name="firmFile" file-model='files' placeholder="代码依赖文件">
                    </div>
                    <div class="btn-group btn-group-lg">
                        <input class="btn-success btn" type="submit" value="提交">
                        <input class="btn-warning btn" ng-click="closeMask()" value="关闭" type="button">
                    </div> 
                </form>
            </div>  
        </div>  
    </div>
</div> 


<!-- his mask -->
<div class="zijin-table-mask his-mask">
    <div class="mask-box container">
        <div class="row">
            <div class=" col-sm-8 col-sm-offset-2">
                <form ng-submit="addHisStrategy()" name="newHisStrategy" novalidate="" enctype="multipart/form-data" id="newHisStrategy">

                    <div class="form-group">
                        <input type="text" class="form-control" ng-model='hisItem.name' placeholder="策略名" required>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" ng-model='firmItem.symbol' placeholder="交易合约" required>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" ng-model='firmItem.exchange' placeholder="策略交易所代码" required>
                    </div>
                   <div class='form-group'>
                        <div class="checkbox">
                            <label for="barLable">
                                <input type="checkbox"
                                        name="modeOptions1"
                                        ng-model='modeBarOptions'
                                        id="barLable" ng-change='getBarList()' checked="true">
                                bar
                            </label>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <label for="tickLable">
                                <input type="checkbox"
                                        name="modeOptions2"
                                        ng-model='modeTickOptions'
                                        id="tickLable" ng-change='getTickList()'>
                                tick
                            </label>
                        </div>    
                   </div>
                   <div class="form-group">
                        <label for="">开始时间</label>
                        <select ng-model='hisItem.start' ng-options='x for x in hisItem.time'></select>
                   </div>
                   <div class="form-group">
                        <label for="">结束时间</label>
                        <select ng-model='hisItem.end' ng-options='x for x in hisItem.time'></select>
                   </div>
                    <div class="form-group">
                        <label>代码依赖文件：</label><input type="file" name="hisFile" file-model='files' placeholder="代码依赖文件">
                    </div>
                    <div class="btn-group btn-group-lg">
                        <input class="btn-success btn" type="submit" value="提交">
                        <input class="btn-warning btn" ng-click="closeMask()" value="关闭" type="button">
                    </div> 
                </form>
            </div>  
        </div>  
    </div>
</div>
</div>